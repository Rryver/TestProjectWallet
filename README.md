# Тестовое задание "Wallet"

---

Напишите приложение, которое по REST принимает запрос вида

```
POST api/v1/wallet
{
  valletId: UUID,
  operationType: DEPOSIT or WITHDRAW,
  amount: 1000
}
```

- после выполняет логику по изменению счета в базе данных
- также есть возможность получить баланс кошелька
```
GET api/v1/wallets/{WALLET_UUID}
```

---

### Стек:
- java 8-17
- Spring 3
- Postgresql

---

- Должны быть написаны миграции для базы данных с помощью liquibase
- Обратите особое внимание проблемам при работе в конкурентной среде (1000 RPS по
одному кошельку). Ни один запрос не должен быть не обработан (50Х error)
- Предусмотрите соблюдение формата ответа для заведомо неверных запросов, когда
кошелька не существует, не валидный json, или недостаточно средств.
- Приложение должно запускаться в докер контейнере, база данных тоже, вся система
должна подниматься с помощью docker-compose
- Предусмотрите возможность настраивать различные параметры как на стороне
приложения так и базы данных без пересборки контейнеров.
- Эндпоинты должны быть покрыты тестами.

---


# Запуск приложения

---

### 1. Через Docker

1. Клонировать проект.
2. Убедиться, что свободны следующие порты:
- `8080` - Java - приложение
- `5050` - pgAdmin
- `5432` - PostgreSQL

2. Выполнить команду `docker-compose build`
3. Дождаться билда приложения (1-2 минуты) и запуска всех контейнеров
4. Выполнить команду `docker-compose up`
5. Открыть приложение в браузере по адресу <a href="http://localhost:8080/doc">http://localhost:8080/doc</a> (swagger)


#### Примечание:
- pgAdmin находится по адресу <a href="http://localhost:5050">http://localhost:5050</a>

    Доступы:
    - `login`: admin@admin.com
    - `password`: root



-------------------------
### 2. Через intelijIdea

1. Клонировать проект.
2. Запустить локально сервер БД (PostgreSQL).
3. Прописать настройки подключения к БД в `resources/application-dev.yaml`
4. Сбилдить приложение: `mvn clean install -P dev`
4. Запустить приложение с профилем `dev`

8. Открыть приложение в браузере по адресу <a href="http://localhost:8080/doc">http://localhost:8080/doc</a> (swagger)